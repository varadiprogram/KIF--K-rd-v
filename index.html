<!doctype html>
<html lang="hu">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Kérdőív - KIFÜ</title>
    <link rel="icon" href="logo.jfif">
    <link rel="stylesheet" href="style.css">
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet">
    <style>
      .col p:hover {
          color: white;
      }
      .radio-image {
        cursor: pointer;
      }
      .col-sm {
        transition: background-color 0.3s, transform 0.3s;
        padding: 10px;
        border-radius: 5px;
      }
      .col-sm.selected {
        background-color: #007bff;
        color: white;
        transform: scale(1.05); 
      }
      .radio-image {
        cursor: pointer;
        transition: transform 0.3s;
      }
      .radio-image.selected {
        transform: scale(1.1); 
      }
    </style>
  </head>
  <body>
    <div class="navbar">
      <a href="https://kifu.gov.hu/main-page/"><img src="logo.jfif" width="50%"></a>
    </div>

    <div class="container-md">
      <div class="kezdetiszoveg">
        <h1>Elégedettségi kérdőív</h1>
        <h3 style="color:#4277bb;">KIFÜ ügyfélbejelentkezés-kezelés</h3>
      </div>

      <form id="surveyForm">
        <div class="borderek">
          <h4>Mennyire volt elégedett az ügyintézéssel?</h4>
          <br>
          <div class="container">
            <div class="row">
              <div class="col-sm">
                <input type="radio" style="visibility: hidden;"
                  id="satisfaction-very" name="satisfaction"
                  value="Nagyon!" required>
                <label for="satisfaction-very">
                  <img src="nagyonjo-removebg-preview.png" class="radio-image">
                  <p>Nagyon!</p>
                </label>
              </div>
              <br>
              <div class="col-sm">
                <input type="radio" style="visibility: hidden;"
                  id="satisfaction-somewhat"
                  name="satisfaction" value="Inkább igen">
                <label for="satisfaction-somewhat">
                  <img src="jo-removebg-preview.png" class="radio-image">
                  <p>Inkább igen</p>
                </label>
              </div>
              <br>
              <div class="col-sm">
                <input type="radio" style="visibility: hidden;"
                  id="satisfaction-neutral"
                  name="satisfaction" value="Inkább nem">
                <label for="satisfaction-neutral">
                  <img src="nemolyanrossz-removebg-preview.png"
                    class="radio-image">
                  <p>Inkább nem</p>
                </label>
              </div>
              <br>
              <div class="col-sm">
                <input type="radio" style="visibility: hidden;"
                  id="satisfaction-bad" name="satisfaction"
                  value="Egyáltalán nem">
                <label for="satisfaction-bad">
                  <img src="rossz-removebg-preview.png" class="radio-image">
                  <p>Egyáltalán nem</p>
                </label>
              </div>
            </div>
          </div>
        </div>

        <div class="borderek">
          <h4>Megfelelőnek találta a bejelentkezésre adott válaszunkat,
            megoldásunkat?</h4>
          <br>
          <div class="container">
            <div class="row">
              <div class="col-sm">
                <input type="radio" style="visibility: hidden;"
                  id="solution-very" name="solution"
                  value="Nagyon!" required>
                <label for="solution-very">
                  <img src="nagyonjo-removebg-preview.png" class="radio-image">
                  <p>Nagyon!</p>
                </label>
              </div>
              <br>
              <div class="col-sm">
                <input type="radio" style="visibility: hidden;"
                  id="solution-somewhat" name="solution"
                  value="Inkább igen">
                <label for="solution-somewhat">
                  <img src="jo-removebg-preview.png" class="radio-image">
                  <p>Inkább igen</p>
                </label>
              </div>
              <br>
              <div class="col-sm">
                <input type="radio" style="visibility: hidden;"
                  id="solution-neutral" name="solution"
                  value="Inkább nem">
                <label for="solution-neutral">
                  <img src="nemolyanrossz-removebg-preview.png"
                    class="radio-image">
                  <p>Inkább nem</p>
                </label>
              </div>
              <br>
              <div class="col-sm">
                <input type="radio" style="visibility: hidden;"
                  id="solution-bad" name="solution"
                  value="Egyáltalán nem">
                <label for="solution-bad">
                  <img src="rossz-removebg-preview.png" class="radio-image">
                  <p>Egyáltalán nem</p>
                </label>
              </div>
            </div>
          </div>
        </div>

        <div class="borderek">
          <h4>Mennyire találta segítőkésznek ügyintézőnk hozzáálását?</h4>
          <br>
          <div class="container">
            <div class="row">
              <div class="col-sm">
                <input type="radio" style="visibility: hidden;"
                  id="helpfulness-very" name="helpfulness"
                  value="Nagyon!" required>
                <label for="helpfulness-very">
                  <img src="nagyonjo-removebg-preview.png" class="radio-image">
                  <p>Nagyon!</p>
                </label>
              </div>
              <br>
              <div class="col-sm">
                <input type="radio" style="visibility: hidden;"
                  id="helpfulness-somewhat" name="helpfulness"
                  value="Inkább igen">
                <label for="helpfulness-somewhat">
                  <img src="jo-removebg-preview.png" class="radio-image">
                  <p>Inkább igen</p>
                </label>
              </div>
              <br>
              <div class="col-sm">
                <input type="radio" style="visibility: hidden;"
                  id="helpfulness-neutral" name="helpfulness"
                  value="Inkább nem">
                <label for="helpfulness-neutral">
                  <img src="nemolyanrossz-removebg-preview.png"
                    class="radio-image">
                  <p>Inkább nem</p>
                </label>
              </div>
              <br>
              <div class="col-sm">
                <input type="radio" style="visibility: hidden;"
                  id="helpfulness-bad" name="helpfulness"
                  value="Egyáltalán nem">
                <label for="helpfulness-bad">
                  <img src="rossz-removebg-preview.png" class="radio-image">
                  <p>Egyáltalán nem</p>
                </label>
              </div>
            </div>
          </div>
        </div>

        <div class="borderek">
          <h4>Milyen egyéb észrevétele van az ügyintézéssel kapcsolatban?</h4>
          <textarea class="form-control" name="feedback" style="height: 100px"
            required></textarea>
        </div>

        <button type="submit" class="btn btn-primary"
          style="float: right; margin-bottom: 2%;">Elküldöm</button>
      </form>
    </div>

    <script>
      document.querySelectorAll('.radio-image').forEach(image => {
        image.addEventListener('click', function() {
          const radioId = this.previousElementSibling.id;
          const radioButton = document.getElementById(radioId);
          radioButton.checked = true;
        });
      });
      function handleSelection(containerClass) {
        document.querySelectorAll(containerClass + ' .radio-image').forEach(image => {
          image.addEventListener('click', function() {
            const col = this.closest('.col-sm');

            // Remove selected class only within the current question
            document.querySelectorAll(containerClass + ' .col-sm').forEach(el => el.classList.remove('selected'));
            document.querySelectorAll(containerClass + ' .radio-image').forEach(img => img.classList.remove('selected'));

            col.classList.add('selected');
            this.classList.add('selected');

            // Set the corresponding radio button to checked
            const radioId = this.previousElementSibling.id;
            const radioButton = document.getElementById(radioId);
            radioButton.checked = true;
          });
        });
      }

      // Apply selection handling for each question
      handleSelection('.borderek:nth-of-type(1)');
      handleSelection('.borderek:nth-of-type(2)');
      handleSelection('.borderek:nth-of-type(3)');
      const FORM_URL = 'https://script.google.com/macros/s/AKfycbzUj-NGHuWpp4kQNjvp8fHv4_8cRQQqrGEZqOGmKoi-Ss03o_OWgFb-w-ayECUyHAkgZQ/exec';

      document.getElementById('surveyForm').addEventListener('submit', function(event) {
        event.preventDefault();

        const formData = new FormData(event.target);
        const formObject = Object.fromEntries(formData.entries());

        fetch(FORM_URL, {
          method: 'POST',
          contentType: 'application/json',
          body: JSON.stringify(formObject)
        })
        .then(response => response.json())
        .then(data => {
          console.log('Success:', data);
          alert('A válaszodat rögzitettük');
        })
        .catch(error => {
          console.error('Error:', error);
          alert('Probáld ujra később valami hiba van!');
        });
      });
    </script>
  </body>
</html>
